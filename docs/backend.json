{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user within the CyberLearn Central platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user (matches auth uid)."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        },
        "role": {
          "type": "string",
          "description": "User's role ('user' or 'admin').",
          "enum": ["user", "admin"]
        }
      },
      "required": [
        "id",
        "email",
        "role"
      ]
    },
    "BlogPost": {
      "title": "BlogPost",
      "type": "object",
      "description": "Represents a blog post. (MVP)",
      "properties": {
        "title": {
          "type": "string",
          "description": "Title of the blog post."
        },
        "slug": {
          "type": "string",
          "description": "URL-friendly slug for the post."
        },
        "content": {
          "type": "string",
          "description": "Markdown content of the blog post."
        },
        "category": {
            "type": "string",
            "description": "Category of the blog post."
        },
        "difficulty": {
          "type": "string",
          "enum": ["Beginner", "Intermediate", "Advanced"]
        },
        "authorId": {
          "type": "string",
          "description": "UID of the author (User)."
        },
        "isPublished": {
          "type": "boolean",
          "description": "True if the post is visible to the public."
        },
        "publishedAt": {
          "type": "string",
          "description": "Timestamp when the post was published.",
          "format": "date-time"
        }
      },
      "required": [
        "title",
        "slug",
        "content",
        "authorId",
        "isPublished"
      ]
    },
    "LearningModule": {
      "title": "LearningModule",
      "type": "object",
      "description": "A top-level container for a series of lessons. (MVP: Static Content)",
      "properties": {
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      },
      "required": ["title", "description"]
    },
    "Topic": {
      "title": "Topic",
      "type": "object",
      "description": "A specific lesson within a Learning Module. (MVP: Static Content)",
      "properties": {
        "title": {
          "type": "string"
        },
        "content": {
          "type": "string",
          "description": "Markdown content of the topic."
        }
      },
      "required": ["title", "content"]
    },
    "UserProgress": {
      "title": "UserProgress",
      "type": "object",
      "description": "Tracks a user's completion of a specific topic/lesson. (MVP)",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The UID of the user."
        },
        "topicId": {
          "type": "string",
          "description": "The ID of the completed topic."
        },
        "isCompleted": {
          "type": "boolean"
        },
        "completedAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "topicId",
        "isCompleted"
      ]
    },
    "ToolUsageLog": {
        "title": "ToolUsageLog",
        "type": "object",
        "description": "Logs when a user uses a specific tool. (MVP)",
        "properties": {
            "userId": {
                "type": "string"
            },
            "toolName": {
                "type": "string"
            },
            "timestamp": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["userId", "toolName", "timestamp"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores public user profile data. A user document is created on sign-up. The 'role' is managed by admins."
        }
      },
      {
        "path": "/roles_admin/{userId}",
        "definition": {
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "DEPRECATED: Admin role is now a field on the user document. This collection is no longer used for MVP."
        }
      },
      {
        "path": "/blog_posts/{blogPostId}",
        "definition": {
          "schema": {
            "$ref": "#/backend/entities/BlogPost"
          },
          "description": "Stores all blog posts. Publicly readable if isPublished is true. Writable only by admins."
        }
      },
      {
        "path": "/learning_modules/{learningModuleId}",
        "definition": {
          "schema": {
            "$ref": "#/backend/entities/LearningModule"
          },
          "description": "Stores learning modules. For MVP, this content is static and managed by admins."
        }
      },
      {
        "path": "/learning_modules/{learningModuleId}/topics/{topicId}",
        "definition": {
          "schema": {
            "$ref": "#/backend/entities/Topic"
          },
          "description": "Stores topics within a learning module. For MVP, this content is static and managed by admins."
        }
      },
      {
        "path": "/users/{userId}/progress/{topicId}",
        "definition": {
          "schema": {
            "$ref": "#/backend/entities/UserProgress"
          },
          "description": "Tracks user completion of learning topics. Writable only by the user themselves."
        }
      },
      {
        "path": "/tool_usage_logs/{logId}",
        "definition": {
            "schema": { "$ref": "#/backend/entities/ToolUsageLog" },
            "description": "Append-only log for tool usage. Writable by any signed-in user for their own actions."
        }
      }
    ],
    "reasoning": "This Firestore structure is optimized for the MVP. It simplifies role management by placing the 'role' field directly on the user object, reducing reads. It defines clear collections for blogs and learning content, with user-specific data like progress nested under the user's document for secure, owner-based access."
  }
}
